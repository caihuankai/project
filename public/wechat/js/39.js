webpackJsonp([39],{

/***/ 1052:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(27)(undefined);
// imports


// module
exports.push([module.i, "\n.special-advance {\n  font-size: 0.24rem;\n  width: 100vw;\n  overflow: hidden;\n  padding: 0 0;\n  padding-bottom: 0.88rem;\n  min-height: 100%;\n  box-sizing: border-box;\n  background: #fff;\n}\n.special-advance .set-amount-popup {\n    width: 5.4rem;\n    height: 100;\n    border-radius: 5px;\n    text-align: center;\n}\n.special-advance .set-amount-popup img {\n      width: 3.02rem;\n      height: 1.9rem;\n}\n.special-advance .content {\n    padding: 0 0.24rem;\n    box-sizing: border-box;\n    line-height: 1.7;\n    font-size: 0.28rem;\n    color: #333;\n}\n.special-advance .content img,\n    .special-advance .content video {\n      width: 100%;\n      margin: 0.3rem 0;\n}\n.special-advance .content * {\n      max-width: 100%;\n}\n.special-advance .title {\n    font-size: 0.4rem;\n    color: #1c0808;\n    text-align: center;\n    margin: 0.48rem 0;\n}\n.special-advance .mint-popup {\n    width: 100%;\n}\n.special-advance .mint-popup h5 {\n      height: 0.9rem;\n      line-height: 0.9rem;\n      border-bottom: 1px solid #ededed;\n      color: #1c0808;\n      text-align: center;\n      font-size: 0.32rem;\n}\n.special-advance .mint-popup h5 span {\n        display: inline-block;\n        float: right;\n        margin-top: 0.3rem;\n        margin-right: 0.24rem;\n        width: 0.3rem;\n        height: 0.3rem;\n        background: url(\"/images/cha.png\") center center no-repeat;\n        background-size: 0.3rem 0.3rem;\n}\n.special-advance .mint-popup .center-item {\n      width: 100%;\n      padding: 0 0.24rem;\n      box-sizing: border-box;\n      height: 3rem;\n      margin: 0.38rem 0;\n}\n.special-advance .mint-popup .center-item h6 {\n        width: 50%;\n        height: 1.8rem;\n        line-height: 1.8rem;\n        padding-left: 0.4rem;\n        border: 1px solid #fcb4b4;\n        border-radius: 0.1rem;\n        color: #c62f2f;\n        background: #ffefef;\n}\n.special-advance .mint-popup .center-item h6 span {\n          display: inline-block;\n          padding-left: 0.5rem;\n          font-size: 0.36rem;\n          background: url(\"/images/column/icon-04.png\") left center no-repeat;\n          background-size: 0.36rem 0.36rem;\n}\n.special-advance .mint-popup .center-item h6 span.active {\n            background: url(\"/images/column/icon-05.png\") left center no-repeat;\n            background-size: 0.36rem 0.36rem;\n}\n.special-advance .mint-popup .center-item p {\n        margin: 0.4rem 0 24rem;\n        line-height: 1.5;\n        font-size: 0.26rem;\n        height: 0.8rem;\n        color: #888;\n        padding-left: 1rem;\n        background: url(\"/images/column/push_icon.png\") left center no-repeat;\n        background-size: 0.8rem 0.8rem;\n}\n.special-advance .mint-popup .footer-item {\n      border-top: 1px solid #ededed;\n}\n.special-advance .mint-popup .footer-item p {\n        height: 0.4rem;\n        margin: 0.24rem 0;\n        padding: 0 0.5rem;\n        color: #888;\n}\n.special-advance .mint-popup .footer-item p a {\n          color: #c62f2f;\n          margin: 0 0.1rem;\n}\n.special-advance .mint-popup .footer-item h5 {\n        height: 0.88rem;\n        background: #c62f2f;\n        margin: 0 0.3rem 0.3rem;\n        color: #fff;\n        border-radius: 0.5rem;\n}\n.special-advance .footer {\n    width: 100%;\n    padding: 0 0.24rem;\n    box-sizing: border-box;\n    height: 1.2rem;\n    position: fixed;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center;\n    font-size: 0.36rem;\n    bottom: 0;\n    box-shadow: 0 0 5px 0px #ebebeb;\n    background: rgba(255, 255, 255, 0.96);\n}\n.special-advance .footer .status1 {\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: -ms-flexbox;\n      display: flex;\n      width: 100%;\n      -webkit-box-align: center;\n      -webkit-align-items: center;\n          -ms-flex-align: center;\n              align-items: center;\n      box-sizing: border-box;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n}\n.special-advance .footer .status1 s {\n        font-size: 0.24rem;\n        color: #353535;\n        margin-left: 0.24rem;\n}\n.special-advance .footer .status2 {\n      width: 100%;\n}\n.special-advance .footer .status2.status3 a {\n        background: #c62f2f;\n        color: #fff;\n}\n.special-advance .footer .status2 a {\n        display: block;\n        height: 0.88rem;\n        line-height: 0.88rem;\n        text-align: center;\n        margin: 0 0.24rem;\n        background-color: #888;\n        font-size: 0.36rem;\n        color: #fff;\n        font-weight: bold;\n        border-radius: 0.4rem;\n}\n.special-advance .footer span {\n      display: inline-block;\n}\n.special-advance .footer .price {\n      font-size: 0.36rem;\n      color: #c62f2f;\n      height: 0.4rem;\n      padding-left: 0.4rem;\n      background: url(\"/images/college/kcyg_bs3.png\") left 0.065rem no-repeat;\n      background-size: 0.27rem 0.3rem;\n}\n.special-advance .footer .sign {\n      width: 2.08rem;\n      height: 0.88rem;\n      line-height: 0.88rem;\n      background: #c62f2f;\n      text-align: center;\n      color: #fff;\n      border-radius: 0.4rem;\n}\n", ""]);

// exports


/***/ }),

/***/ 1211:
/***/ (function(module, exports, __webpack_require__) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('section', {
    staticClass: "special-advance"
  }, [(_vm.loading) ? [_c('loading')] : [_c('div', [_c('h5', {
    staticClass: "title"
  }, [_vm._v(_vm._s(_vm.data.class_name))]), _vm._v(" "), _c('section', {
    staticClass: "content",
    domProps: {
      "innerHTML": _vm._s(_vm.data.preview)
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "footer"
  }, [(_vm.data.join_course == 0 && _vm.applyStatus == 2) ? [_c('h5', {
    staticClass: "status1"
  }, [(_vm.data.price != '' || _vm.data.price != 0) ? _c('span', {
    staticClass: "price"
  }, [_vm._v(_vm._s(_vm.data.price)), (_vm.data.origin_price != '' || _vm.data.origin_price != 0) ? _c('s', [_vm._v(_vm._s(_vm.data.origin_price))]) : _vm._e()]) : _c('span', {
    staticClass: "price"
  }, [_vm._v("免费")]), _vm._v(" "), _c('span', {
    staticClass: "sign",
    on: {
      "click": function($event) {
        _vm.popupVisible = true
      }
    }
  }, [_vm._v("立即报名")])])] : _vm._e(), _vm._v(" "), (_vm.data.join_course == 0 && _vm.applyStatus == 3) ? [_c('h5', {
    staticClass: "status2"
  }, [_c('a', {
    attrs: {
      "href": "javascript:;"
    }
  }, [_vm._v("\n                        报名已截止\n                    ")])])] : _vm._e(), _vm._v(" "), (_vm.data.join_course == 0 && _vm.applyStatus == 1) ? [_c('h5', {
    staticClass: "status2"
  }, [_c('a', {
    attrs: {
      "href": "javascript:;"
    }
  }, [_vm._v("\n                        报名即将开始\n                    ")])])] : _vm._e(), _vm._v(" "), (_vm.data.join_course == 1 && _vm.beginStatus == false) ? [_c('h5', {
    staticClass: "status2"
  }, [_c('a', {
    attrs: {
      "href": "javascript:;"
    }
  }, [_vm._v("\n                        您已报名(请留意上课时间)\n                    ")])])] : _vm._e(), _vm._v(" "), (_vm.data.join_course == 1 && _vm.beginStatus == true) ? [_c('h5', {
    staticClass: "status2 status3"
  }, [_c('a', {
    attrs: {
      "href": "javascript:;"
    },
    on: {
      "click": _vm.getTab
    }
  }, [_vm._v("\n                        点击进入>>\n                    ")])])] : _vm._e()], 2), _vm._v(" "), _c('mt-popup', {
    attrs: {
      "position": "bottom"
    },
    model: {
      value: (_vm.popupVisible),
      callback: function($$v) {
        _vm.popupVisible = $$v
      },
      expression: "popupVisible"
    }
  }, [_c('section', [_c('h5', [_vm._v("\n                    特训班报名\n                    "), _c('span', {
    on: {
      "click": function($event) {
        _vm.popupVisible = false
      }
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "center-item"
  }, [_c('h6', [(_vm.data.price != '' || _vm.data.price != 0) ? _c('span', {
    staticClass: "price active"
  }, [_vm._v(_vm._s(_vm.data.price))]) : _c('span', {
    staticClass: "price active"
  }, [_vm._v("免费")])]), _vm._v(" "), _c('p', [_vm._v("报名后，每次开课前系统将会给您发送开课通知，请留意公众号及消息中心。")])]), _vm._v(" "), _c('div', {
    staticClass: "footer-item"
  }, [_c('p', [_vm._v("报名即将表示同意\n                        "), _c('router-link', {
    attrs: {
      "to": "/agreement"
    }
  }, [_vm._v("《大策略产品服务协议》")])], 1), _vm._v(" "), _c('h5', {
    on: {
      "click": _vm.topaygift
    }
  }, [_vm._v("立即报名")])])])]), _vm._v(" "), _c('mt-popup', {
    staticClass: "set-amount-popup",
    attrs: {
      "popup-transition": "popup-fade"
    },
    model: {
      value: (_vm.showCodePayPopup),
      callback: function($$v) {
        _vm.showCodePayPopup = $$v
      },
      expression: "showCodePayPopup"
    }
  }, [_c('article', [_c('h3', [_vm._v("使用微信扫码支付")]), _vm._v(" "), _c('section', [_c('img', {
    attrs: {
      "src": _vm.CodeIng
    }
  })])])])], _vm._v(" "), _c('Qrcode')], 2)
},staticRenderFns: []}
module.exports.render._withStripped = true
if (false) {
  module.hot.accept()
  if (module.hot.data) {
     require("vue-hot-reload-api").rerender("data-v-c56be2b4", module.exports)
  }
}

/***/ }),

/***/ 1320:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(1052);
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var update = __webpack_require__(29)("49a711d2", content, false);
// Hot Module Replacement
if(false) {
 // When the styles change, update the <style> tags
 if(!content.locals) {
   module.hot.accept("!!../../node_modules/css-loader/index.js!../../node_modules/vue-loader/lib/style-compiler/index.js?{\"vue\":true,\"id\":\"data-v-c56be2b4\",\"scoped\":false,\"hasInlineConfig\":true}!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./specialTrainAdvance.vue", function() {
     var newContent = require("!!../../node_modules/css-loader/index.js!../../node_modules/vue-loader/lib/style-compiler/index.js?{\"vue\":true,\"id\":\"data-v-c56be2b4\",\"scoped\":false,\"hasInlineConfig\":true}!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./specialTrainAdvance.vue");
     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
     update(newContent);
   });
 }
 // When the module is disposed, remove the <style> tags
 module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 417:
/***/ (function(module, exports, __webpack_require__) {

var disposed = false
function injectStyle (ssrContext) {
  if (disposed) return
  __webpack_require__(1320)
}
var Component = __webpack_require__(28)(
  /* script */
  __webpack_require__(840),
  /* template */
  __webpack_require__(1211),
  /* styles */
  injectStyle,
  /* scopeId */
  null,
  /* moduleIdentifier (server only) */
  null
)
Component.options.__file = "F:\\SVN\\webApp\\公众号\\dacelve1.0\\src\\college\\specialTrainAdvance.vue"
if (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== "default" && key.substr(0, 2) !== "__"})) {console.error("named exports are not supported in *.vue files.")}
if (Component.options.functional) {console.error("[vue-loader] specialTrainAdvance.vue: functional components are not supported with templates, they should use render functions.")}

/* hot reload */
if (false) {(function () {
  var hotAPI = require("vue-hot-reload-api")
  hotAPI.install(require("vue"), false)
  if (!hotAPI.compatible) return
  module.hot.accept()
  if (!module.hot.data) {
    hotAPI.createRecord("data-v-c56be2b4", Component.options)
  } else {
    hotAPI.reload("data-v-c56be2b4", Component.options)
  }
  module.hot.dispose(function (data) {
    disposed = true
  })
})()}

module.exports = Component.exports


/***/ }),

/***/ 520:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = {
    data: function data() {
        return {
            codeImg: "", //大策略二维码
            closePop: false //大策略二维码

        };
    },
    mounted: function mounted() {
        var _this = this;

        this.$store.dispatch("getUserInfo", function (res) {

            if (_this.isSubscribe == false) {
                if (_this.$route.query.shareId == 1) {
                    _this.getQrCode();
                }
            }
        });
    },

    computed: {
        isSubscribe: function isSubscribe() {
            return this.$store.state.userInfo.isSubscribe;
        }
    },
    methods: {
        /**
        * 获取公众号二维码
        * @return [type] [description]
        */
        getQrCode: function getQrCode() {
            var _this2 = this;

            this.$http.get("/Home/getQrCode").then(function (res) {
                _this2.codeImg = res.data.data;
                _this2.closePop = true;
                alert(ll);
            });
        }
    }
};

/***/ }),

/***/ 523:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(27)(undefined);
// imports


// module
exports.push([module.i, "\n.Qcode .liveTitleBox-comment {\n  width: 80%;\n  border-radius: 10px;\n}\n.Qcode .liveTitleBox-comment .img {\n    width: 2.8rem !important;\n    margin: 0.8rem auto 0;\n    height: 2.8rem !important;\n    background-size: 100% auto;\n}\n.Qcode .liveTitleBox-comment .buttom {\n    width: 100%;\n    background: #c62f2f;\n    height: 1rem;\n    border-radius: 0px 0px 10px 10px;\n}\n.Qcode .liveTitleBox-comment .buttom a {\n      display: block;\n      width: 100%;\n      line-height: 1rem;\n      text-align: center;\n      color: #fff;\n}\n.Qcode .liveTitleBox-comment h2 {\n    text-align: center;\n    color: #1c0808;\n    font-size: 16px;\n    font-weight: bold;\n}\n.Qcode .liveTitleBox-comment h2 {\n    font-weight: normal;\n    margin: 0.48rem 0 0.32rem;\n}\n.Qcode .liveTitleBox-comment .class-name {\n    margin: 0.3rem 0 0.3rem;\n}\n.Qcode .liveTitleBox-comment .title {\n    border-bottom: 1px solid #eec0c0;\n}\n.Qcode .liveTitleBox-comment .title input {\n      border: 0px;\n      border-shadow: 0;\n      width: 100%;\n      height: 35px;\n      text-align: center;\n      caret-color: #cd0000;\n}\n.Qcode .liveTitleBox-comment p {\n    line-height: 30px;\n    text-align: center;\n    color: #888;\n}\n", ""]);

// exports


/***/ }),

/***/ 524:
/***/ (function(module, exports, __webpack_require__) {

var disposed = false
function injectStyle (ssrContext) {
  if (disposed) return
  __webpack_require__(526)
}
var Component = __webpack_require__(28)(
  /* script */
  __webpack_require__(520),
  /* template */
  __webpack_require__(525),
  /* styles */
  injectStyle,
  /* scopeId */
  null,
  /* moduleIdentifier (server only) */
  null
)
Component.options.__file = "F:\\SVN\\webApp\\公众号\\dacelve1.0\\src\\subcomponents\\personalCenter\\QrCode.vue"
if (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== "default" && key.substr(0, 2) !== "__"})) {console.error("named exports are not supported in *.vue files.")}
if (Component.options.functional) {console.error("[vue-loader] QrCode.vue: functional components are not supported with templates, they should use render functions.")}

/* hot reload */
if (false) {(function () {
  var hotAPI = require("vue-hot-reload-api")
  hotAPI.install(require("vue"), false)
  if (!hotAPI.compatible) return
  module.hot.accept()
  if (!module.hot.data) {
    hotAPI.createRecord("data-v-14776c4c", Component.options)
  } else {
    hotAPI.reload("data-v-14776c4c", Component.options)
  }
  module.hot.dispose(function (data) {
    disposed = true
  })
})()}

module.exports = Component.exports


/***/ }),

/***/ 525:
/***/ (function(module, exports, __webpack_require__) {

module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    staticClass: "Qcode"
  }, [(_vm.closePop) ? _c('div', {
    staticClass: "liveTitleBox-comment mint-popup ",
    staticStyle: {
      "z-index": "2004"
    }
  }, [_c('div', {
    staticClass: "content"
  }, [_c('p', [_c('img', {
    staticClass: "img",
    attrs: {
      "src": _vm.codeImg
    }
  })]), _vm._v(" "), _c('h2', [_vm._v("长按关注大策略公众号")]), _vm._v(" "), _c('P', {
    staticClass: "class-name"
  }, [_vm._v("\n                关注可收到最新投资动态\n            ")])], 1), _vm._v(" "), _c('div', {
    staticClass: "buttom "
  }, [_c('a', {
    attrs: {
      "href": "javascript:;"
    },
    on: {
      "click": function($event) {
        _vm.closePop = false
      }
    }
  }, [_vm._v("关闭")])])]) : _vm._e(), _vm._v(" "), (_vm.closePop) ? _c('div', {
    staticClass: "v-modal",
    staticStyle: {
      "z-index": "2002"
    }
  }) : _vm._e()])
},staticRenderFns: []}
module.exports.render._withStripped = true
if (false) {
  module.hot.accept()
  if (module.hot.data) {
     require("vue-hot-reload-api").rerender("data-v-14776c4c", module.exports)
  }
}

/***/ }),

/***/ 526:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(523);
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var update = __webpack_require__(29)("03471fdc", content, false);
// Hot Module Replacement
if(false) {
 // When the styles change, update the <style> tags
 if(!content.locals) {
   module.hot.accept("!!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\"vue\":true,\"id\":\"data-v-14776c4c\",\"scoped\":false,\"hasInlineConfig\":true}!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./QrCode.vue", function() {
     var newContent = require("!!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\"vue\":true,\"id\":\"data-v-14776c4c\",\"scoped\":false,\"hasInlineConfig\":true}!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./QrCode.vue");
     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
     update(newContent);
   });
 }
 // When the module is disposed, remove the <style> tags
 module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 840:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _data$destroyed$compu;

var _vuex = __webpack_require__(70);

var _mintUi = __webpack_require__(54);

var _QrCode = __webpack_require__(524);

var _QrCode2 = _interopRequireDefault(_QrCode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; } //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

exports.default = (_data$destroyed$compu = {
    data: function data() {
        return {
            courseId: this.$route.params.id,
            popupVisible: false,
            signin: true,
            applyStatus: 1,
            beginStatus: false,
            data: "",
            loading: true,
            residue: "",
            showCodePayPopup: false, //是否显示扫描支付
            CodeIng: '' //微信二维码支付码
        };
    },
    destroyed: function destroyed() {
        _mintUi.Indicator.close();
        this.setCookie("indexLink", 0);
        this.setCookie("shareLink", '');
    },

    /*   computed: {
           userId() {
               return this.$store.state.userInfo.user_id;
           }
       },*/
    computed: (0, _vuex.mapState)({
        userId: function userId(state) {
            return state.userInfo.user_id;
        },
        isWeiXin: function isWeiXin(state) {
            return state.isWeiXin;
        }
    }),
    beforeRouteEnter: function beforeRouteEnter(to, from, next) {
        next(function (vm) {
            vm.$store.dispatch("getUserInfo", function (res) {
                vm.getData();
                vm.getGift();
            });
        });
    },

    components: {
        Qrcode: _QrCode2.default
    },
    created: function created() {
        this.setCookie('isShareLink', 1);
        this.$store.commit("setTitle", "课程预告");
        this.$store.commit("hideTabber");
    }
}, _defineProperty(_data$destroyed$compu, "destroyed", function destroyed() {
    console.log("我已经离开了！");
    this.setCookie("isBack", 0);
    _mintUi.Indicator.close();
}), _defineProperty(_data$destroyed$compu, "methods", {
    getTab: function getTab() {
        if (this.data.detail_status == 1) {
            this.$router.replace({ path: '/course/specialOnlive/' + this.data.id });
        } else {
            this.$router.replace({ path: '/trainCourseNull' });
        }
    },
    config: function config() {
        var _this2 = this;

        wx.ready(function () {
            _this2.wxShare([{
                //分享到朋友圈
                title: _this2.data.class_name,
                desc: _this2.data.class_name + "预告",
                imgUrl: _this2.data.head_add,
                link: window.location.origin + "/#/specialTrainAdvance/" + _this2.courseId + '?shareId=1'
            }, {
                //分享给朋友

                title: _this2.data.class_name,
                desc: _this2.data.class_name + "预告",
                imgUrl: _this2.data.head_add,
                link: window.location.origin + "/#/specialTrainAdvance/" + _this2.courseId + '?shareId=1'
            }], function () {});
        });
    },
    topaygift: function topaygift() {
        var _this3 = this;

        _mintUi.Indicator.open();
        this.popupVisible = false;

        if (this.residue >= this.data.price) {
            this.$http.post(this.hostUrl + "/InpourPay/pay", {
                user_id: this.userId,
                class_id: this.data.id,
                amount: this.data.price,
                type: 1,
                remake: ""
            }, { emulateJSON: true }).then(function (res) {
                if (res.body.code == 0) {
                    _mintUi.Indicator.close();
                    (0, _mintUi.Toast)({
                        message: "报名成功",
                        iconClass: "icon icon-success",
                        duration: 3000
                    });
                    _this3.data.join_course = 1;
                } else if (res.body.code == -16026) {
                    //余额不足

                    _mintUi.Indicator.close();
                    _this3.toCharge(_this3.data.price - _this3.residue);
                    // this.$router.push({ path: "/giftBalance" });
                } else {
                    _mintUi.Indicator.close();
                    (0, _mintUi.Toast)({
                        message: res.body.msg,
                        iconClass: "icon icon-success",
                        duration: 3000
                    });
                    _this3.popupVisible = false;
                }
            });
        } else {
            this.toCharge(this.data.price - this.residue);

            // alert('余额不足')
            //this.$router.push({ path: "/giftBalance" });
        }
    },


    //支付
    toCharge: function toCharge(amount) {
        var _this4 = this;

        this.Countdown = 60;
        //充值
        var reg = /^[0-9]*[1-9][0-9]*$/;

        if (amount.length > 6) {
            //                Toast('应小于六位数');
            return;
        }
        if (amount > 0) {
            if (this.isWeiXin) {
                this.$http.post(this.hostUrl + "/WechatPay/inpour", { user_id: this.userId, amount: amount }, { emulateJSON: true }).then(function (res) {
                    _this4.jsonstr = res.body;
                    _mintUi.Indicator.close();
                    console.log("setChargeNum", _this4.setChargeNum);
                    _this4.payAmount = amount;
                    _this4.callpay();
                });
            } else {
                //二维码支付
                this.$http.post(this.hostUrl + "/WechatPay/native_pay", { user_id: this.userId, amount: amount }, { emulateJSON: true }).then(function (res) {
                    console.log(res.body.data);
                    _mintUi.Indicator.close();
                    _this4.CodeIng = res.body.data.qr_url;
                    _this4.showCodePayPopup = true;
                    var order_no = res.body.data.order_no;
                    var orderNoTime = setInterval(function (res) {
                        _this4.WechatPay(order_no, orderNoTime);
                    }, 2000);
                });
            }
        }
    },
    WechatPay: function WechatPay(order_no, orderNoTime) {
        var _this5 = this;

        //訂單状态查询
        console.log('123456');
        this.$http.post(this.hostUrl + "/WechatPay/orderStatus", { order_no: order_no }, { emulateJSON: true }).then(function (res) {
            console.log(res);
            if (res.body.data == 1) {
                //支付成功
                _this5.showCodePayPopup = false;
                clearInterval(orderNoTime);
                _this5.getData();
            } else {
                (0, _mintUi.Toast)({
                    //取消支付
                    message: "已取消报名",
                    duration: 2000
                });
            }

            clearInterval(orderNoTime);
        });
    },

    //微信支付
    jsApiCall: function jsApiCall() {
        var _this = this;
        WeixinJSBridge.invoke("getBrandWCPayRequest", JSON.parse(this.jsonstr), function (res) {

            WeixinJSBridge.log("res.err_msg", res.err_msg);
            if (res.err_msg == "get_brand_wcpay_request:ok") {
                //支付成功
                _this.residue = _this.data.price; //当充值成功后再调一次报名页面
                _this.topaygift();
                _this.showSetAmountPopup = false;

                // Indicator.close();
            }
            if (res.err_msg == "get_brand_wcpay_request:cancel") {
                _mintUi.Indicator.close();
                (0, _mintUi.Toast)({
                    //取消支付
                    message: "已取消报名",
                    duration: 2000
                });
            }
            if (res.err_msg == "get_brand_wcpay_request:fail") {
                _mintUi.Indicator.close();
                (0, _mintUi.Toast)("支付失败");
            }
        });
    },
    callpay: function callpay() {
        if (typeof WeixinJSBridge == "undefined") {
            if (document.addEventListener) {
                document.addEventListener("WeixinJSBridgeReady", this.jsApiCall, false);
            } else if (document.attachEvent) {
                document.attachEvent("WeixinJSBridgeReady", this.jsApiCall);
                document.attachEvent("onWeixinJSBridgeReady", this.jsApiCall);
            }
            _mintUi.Indicator.close();
        } else {
            this.jsApiCall();
        }
    },

    /*
     ** 获取特训班预告
     */
    getData: function getData() {
        var _this6 = this;

        this.$http.get("CourseDetails/details", {
            params: { user_id: this.userId, id: this.courseId }
        }).then(function (res) {
            if (res.body.code == 0) {
                _this6.data = res.body.data;
                // this.data.price = 0.01;
                if (_this6.data.live_user_id == _this6.data.user_id) {
                    _this6.data.join_course = 1;
                }

                _this6.loading = false;
                _this6.config();
                var start_time = _this6.data.begin_enroll_time;
                var end_time = _this6.data.end_enroll_time;

                var timestamp2 = new Date(start_time.split("-").join("/")),
                    timestamp3 = new Date(end_time.split("-").join("/")),
                    timestamp1 = new Date(),
                    timestamp4 = new Date(_this6.data.begin_time.split("-").join("/"));
                var a = timestamp4.getTime() - timestamp1.getTime();
                var s = timestamp2.getTime() - timestamp1.getTime();
                var e = timestamp3.getTime() - timestamp1.getTime();
                if (a <= 0) {
                    _this6.beginStatus = true;
                }
                if (_this6.data.enroll_end_state == 2) {
                    _this6.applyStatus = 1;
                    return;
                } else if (_this6.data.enroll_end_state == 0) {
                    //ing
                    _this6.applyStatus = 2;
                    return;
                } else if (_this6.data.enroll_end_state == 1) {
                    //結束
                    _this6.applyStatus = 3;
                    return;
                }
            } else {
                (0, _mintUi.Toast)({
                    message: res.body.msg,
                    iconClass: "icon icon-success",
                    duration: 1000
                });
                setTimeout(function () {
                    _this6.$router.replace({ path: '/collegeIndex' });
                }, 200);
            }
        });
    },


    /*
     ** 获取我的礼点
     */
    getGift: function getGift() {
        var _this7 = this;

        this.$http.get(this.hostUrl + "/User/getAccountBalance").then(function (res) {
            res = res.body;
            if (res.code == 200) {
                _this7.residue = res.data;
            } else {
                console.log(res);
            }
        });
    }
}), _defineProperty(_data$destroyed$compu, "watch", {
    popupVisible: function popupVisible(val) {
        if (val) {
            this.$nextTick(function () {
                var video = document.querySelectorAll("video");
                for (var i = 0; i < video.length; i++) {
                    video[i].style.display = 'none';
                }
            });
        } else {
            this.$nextTick(function () {
                var video = document.querySelectorAll("video");
                for (var i = 0; i < video.length; i++) {
                    video[i].style.display = 'block';
                }
            });
        }
    }
}), _data$destroyed$compu);

/***/ })

});