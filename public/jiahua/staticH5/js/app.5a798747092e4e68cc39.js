webpackJsonp([1],{0:function(e,t){},"5LIk":function(e,t){},"5t/z":function(e,t){},"6VuS":function(e,t){},BPWA:function(e,t){e.exports="data:image/png;base64,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"},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),o=s("Au9i"),i=s.n(o),a={name:"App",created:function(){this.initRem(),this.IsPC(),this.getUreId()},methods:{checkLogin:function(){var e=this;this.$request.get("/Login/checkLogin","",function(t){200==t.code?e.$router.push("/"):-5002==t.code&&e.$router.push("/login")})},getUreId:function(){var e=this;this.$request.get("/Login/autoLogin","",function(t){200==t.code?e.setCookie("username",t.data.userId,1):Object(o.Toast)({message:"网络超时，请刷新",duration:1e3})})},IsPC:function(){var e=window.location.href,t=navigator.userAgent,s=t.match(/(iPad).*OS\s([\d_]+)/),n=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/),o=t.match(/(Android)\s+([\d.]+)/);n||o||s?e.indexOf("H5")<0&&(window.location.href="http://"+document.location.hostname+"/H5.html"):e.indexOf("H5")>0&&(window.location.href="http://"+document.location.hostname)}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=s("VU/8")(a,r,!1,function(e){s("6VuS")},null,null).exports,l=s("/ocq"),d=s("iqGf"),u=s("mvHQ"),m=s.n(u),h=function(){this.length=18,this.version=10,this.subcmd=1,this.maincmd=106,this.checkcode=0,this.data={param1:12,param2:8,param3:7,param4:1}},p=function(){this.length=14,this.version=10,this.checkcode=0,this.maincmd=106,this.subcmd=21015,this.data={}},f=function(){this.loginid=0,this.token="",this.platformType=4,this.mobile=3},g=function(){this.userid=1706743,this.vcbid=1,this.devtype=3,this.time=0,this.crc32=15,this.coremessagever=10690001,this.cuserpwd="",this.croompwd="",this.cSerial="",this.cMacAddr="",this.cIpAddr="",this.bloginSource=0,this.reserve1=0,this.reserve2=0},v=function(){this.userid=0,this.vcbid=0},w=function(){this.groupId,this.msg={}},S=function(){this.userId},b=function(){this.srcUser={},this.dstUser={},this.msgId,this.msgTime,this.msgType,this.content,this.atList,this.msgTimeStr="2017-06-08 15:51:29",this.clientMSgId,this.recall,this.sendState},_=function(){this.userid,this.roomid},k=function(){this.groupid,this.userid},y=function(){this.userId,this.groupId,this.forward,this.msgId,this.count},W={joinRoom:function(e,t){var s=new p,n=new g;s.subcmd=2e3,n.userid=e,n.vcbid=t,s.data=n,T.ws.send(m()(s)),console.log("ClientJoinRoomReq")},leaveRoom:function(e,t){var s=new p,n=new v;s.subcmd=2010,n.userid=e,n.vcbid=t,s.data=n,T.ws.send(m()(s)),console.log("ClientleaveRoomReq")},sendMessage:function(e,t,s,n,o,i){var a=new Date,r=new p,c=new w,l=new b,d=new S;d.userId=+e,l.srcUser=d,l.content=s,l.msgTime=parseInt(a.getTime()/1e3),l.msgTimeStr=this.format(a),l.msgType=n||0,l.extendType=o,c.groupId=+t,"number"!=typeof i&&"string"!=typeof i||(l.mastermsgId=parseInt(i)),c.msg=l,r.subcmd=3010,r.data=c,T.ws.send(m()(r)),console.log("sendMessage")},overLive:function(e,t){var s=new p,n=new k;n.userid=+e,n.groupid=+t,s.subcmd=2217,s.data=n,T.ws.send(m()(s))},getMsgHis:function(e,t,s,n,o,i,a){var r=new p,c=new y;c.userId=e,c.groupId=+t,c.forward=n,c.queryTime=a,c.msgId=s?+s:0,c.count=o?0:i||10,r.subcmd=3016,r.data=c,T.ws.send(m()(r))},getOnLineList:function(e,t){var s=new p,n=new y;n.userid=+e,n.vcbid=+t,s.subcmd=2136,n.messageid=0,n.actionid=0,s.data=n,T.ws.send(m()(s))},format:function(e){function t(e){return e>9?e+"":"0"+e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())}},C=[],T={ws:null,setping:null,connect:function(e,t,s,n,o,i,a){var r=this;this.ws=new WebSocket("ws://"+i+":"+a),this.ws.onopen=function(){var n=new h;r.ws.send(m()(n));var o=new p,i=new f;i.loginid=+e,i.token=t,o.data=i,r.ws.send(m()(o)),r.setping=setInterval(function(){r.sendPingClient(e,+s)},2e4)},this.ws.onmessage=function(e){r.onmessage(e,+s,n)},this.ws.onerror=this.onerror,this.ws.onclose=function(e){r.onclose(e,o)}},send:function(e,t,s){"function"==typeof s&&(C[e]=s),"function"==typeof t&&t()},onmessage:function(e,t,s){var n=JSON.parse(e.data);return 21017==n.subcmd&&W.joinRoom(n.data.userid,+t),"function"==typeof C[n.subcmd]&&C[n.subcmd](n),s&&s(n),n},onerror:function(e){console.log(e)},onclose:function(e,t){clearInterval(this.setping),console.log(e),t&&t()},sendPingClient:function(e,t){var s=new p;s.data=new _,s.subcmd=2,s.length=22,s.data.userid=+e,s.data.roomid=+t,console.log(s),this.ws.send(m()(s))}};s("Jg0P");s("aTgM"),s("g3Gj"),s("5LIk");var E={data:function(){return{userId:"",EmojiData:[],courseId:1000010029,commentText:"",courseBg:"",disclaimer:"",push_status:2,comments:[],live_cover:"",pull_url:"",commentLastId:0,maxL:"",minL:"",commentFirst:!0,allLoaded:!1,topStatus:"",selected:1,playerOptions:{},wrapperHeight:"",metaInfo:{title:"家华直播间",name:"家华直播间",content:""}}},name:"async",metaInfo:function(){return{title:this.metaInfo.title,meta:[{name:this.metaInfo.name,content:this.metaInfo.content}],link:[{rel:"",href:"document.location.hostname"}]}},components:{videoPlayer:d.videoPlayer,Loadmore:o.Loadmore},created:function(){this.getData()},beforeDestroy:function(){W.leaveRoom(+this.userId,+this.courseId),clearInterval(T.setping),T.ws.close()},mounted:function(){this.$nextTick(function(){window.scroll(0,0)})},methods:{handleTopChange:function(e){this.topStatus=e},getEmoji:function(){var e=this;this.$request.get("/Expression/getExpressionList","",function(t){200==t.code&&(e.EmojiData=t.data,console.log(t.data),e.getHistory(0,!1,20,!0))})},loadTop:function(){var e=this;console.log(123455),this.allLoaded?(this.$refs.loadmore.onTopLoaded(),Object(o.Toast)({message:"亲,到顶了哦",duration:2e3})):setTimeout(function(){e.$refs.loadmore.onTopLoaded(),e.getHistory(e.minL,!1,20,!0)},1e3)},getHistory:function(e,t,s,n){W.getMsgHis(+this.userId,+this.courseId,e,n,t,s)},sendComment:function(e){""==this.commentText.trim()||""==this.commentText.length?(this.commentErr=!0,Object(o.Toast)({message:"评论为空哦",duration:1e3})):(3==T.ws.readyState&&Object(o.Toast)({message:"网络超时，请刷新",duration:1e3}),W.sendMessage(this.userId,this.courseId,this.commentText.replace(/[\r\n]/g,""))),this.commentText=""},formatDate:function(e){function t(e){return e>9?e+"":"0"+e}return t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())},onmessage:function(e){var t=this,s=e.data;switch(console.log(e),e.subcmd){case 2002:console.log(s),window.onbeforeunload=function(){W.leaveRoom(+t.userId,+t.courseId)},this.getEmoji();break;case 2181:break;case 2226:this.push_status=1;break;case 2227:this.push_status=2;break;case 2218:break;case 3011:Object(o.Toast)({message:"发表评论成功",iconClass:"icon icon-success",duration:1e3});break;case 3012:if(s.msg.content.indexOf("[-")>=0){this.isEmojiBox=!1;for(var n=1,i=0;i<this.EmojiData.length;i++)if(s.msg.content.indexOf(this.EmojiData[i].expression_number)>=0){var a=this.EmojiData[i].qiniuImg;console.log(a)}}this.comments.push({name:s.msg.srcUser.alias,avatar:s.msg.srcUser.head,content:s.msg.content,type:s.msg.srcUser.UserType,time:this.formatDate(new Date(1e3*s.msg.msgTime)),emojitype:n||0,emojiexpression:a||0}),setTimeout(function(){document.getElementsByClassName("comment")[0].scrollTop=document.getElementsByClassName("txt")[0].offsetTop},500);break;case 3017:if(s.msgs){this.maxL=s.msgs[0].msgId,this.minL=s.msgs[s.msgs.length-1].msgId,s.msgs.length<20&&(this.allLoaded=!0);for(var r=0,c=s.msgs.length;r<c;r++)if(s.msgs[r].content.indexOf("[-")>=0){for(n=1,i=0;i<this.EmojiData.length;i++)if(s.msgs[r].content.indexOf(this.EmojiData[i].expression_number)>-1){a=this.EmojiData[i].qiniuImg;this.comments.unshift({name:s.msgs[r].srcUser.alias,type:s.msgs[r].srcUser.UserType,avatar:s.msgs[r].srcUser.head,content:s.msgs[r].content,time:this.formatDate(new Date(1e3*s.msgs[r].msgTime)),emojitype:n,emojiexpression:a})}}else this.comments.unshift({name:s.msgs[r].srcUser.alias,avatar:s.msgs[r].srcUser.head,content:s.msgs[r].content,type:s.msgs[r].srcUser.UserType,time:this.formatDate(new Date(1e3*s.msgs[r].msgTime)),emojitype:0,emojiexpression:0});1==this.commentFirst&&(this.$nextTick(function(){setTimeout(function(){t.wrapperHeight=document.documentElement.clientHeight-t.$refs.wrapper.getBoundingClientRect().top})}),setTimeout(function(){document.getElementsByClassName("comment")[0].scrollTop=document.getElementsByClassName("txt")[0].offsetTop},500),this.commentFirst=!1)}else this.allLoaded=!0,this.commentFirst=!1}},connect:function(e,t){T.connect(this.userId,"",this.courseId,this.onmessage,function(){},e,t)},getData:function(){var e=this;this.$request.get("/BannerAndLive/fetchBannerAndLiveData","",function(t){console.log(t),200==t.code&&(e.userId=e.getCookie("username"),e.connect(t.data.webSocket.host,t.data.webSocket.port),e.pull_url=t.data.pull_url,e.live_cover=t.data.live_cover,e.push_status=t.data.push_status,e.courseBg=t.data.course_table,e.disclaimer=t.data.disclaimer,e.getPullVideo())})},getPullVideo:function(){var e=this;1==this.push_status&&this.pull_url,1==this.push_status&&this.$nextTick(function(){e.playerOptions={fluid:!0,sources:[{withCredentials:!1,type:"application/x-mpegURL",src:e.pull_url}],controlBar:{timeDivider:!1,durationDisplay:!1},flash:{hls:{withCredentials:!1}},html5:{hls:{withCredentials:!1}},poster:e.live_cover,playsinline:!0}})}},watch:{commentText:function(e){""!=e.trim()?document.getElementById("sendBtn").className="active":document.getElementById("sendBtn").className=""}}},A={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"index"},[s("header",[s("div",{staticClass:"video-play"},[1==e.push_status?[s("video-player",{directives:[{name:"show",rawName:"v-show",value:1==e.push_status,expression:"push_status == 1"}],ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{"webkit-playsinline":"true",options:e.playerOptions}})]:[s("img",{directives:[{name:"show",rawName:"v-show",value:2==e.push_status,expression:"push_status == 2"}],attrs:{src:e.live_cover,alt:""}})]],2)]),e._v(" "),s("section",{staticClass:"article"},[s("nav",[s("span",{class:{active:1==e.selected},on:{click:function(t){e.selected=1}}},[e._v("互动")]),e._v(" "),s("span",{class:{active:2==e.selected},on:{click:function(t){e.selected=2}}},[e._v("免责")]),e._v(" "),s("span",{class:{active:3==e.selected},on:{click:function(t){e.selected=3}}},[e._v("课程表")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.selected,expression:"selected == 1"}],staticClass:"comment-box"},[s("div",{ref:"wrapper",staticClass:"comment ",style:{height:e.wrapperHeight+"px"},attrs:{id:"sidebar"}},[s("mt-loadmore",{ref:"loadmore",attrs:{"top-method":e.loadTop,topPullText:"请点击历史记录页查看更多内容","auto-fill":!1},on:{"top-status-change":e.handleTopChange}},[e._l(e.comments,function(t){return s("div",{staticClass:"comment-item"},[s("img",{attrs:{src:t.avatar,alt:""}}),e._v(" "),s("div",[s("h5",[s("span",{staticClass:"name"},[e._v(e._s(t.name))]),3==t.type?s("span",{staticClass:"type ass"}):e._e(),2==t.type?s("span",{staticClass:"type tea"}):e._e(),s("span",{staticClass:"time"},[e._v(e._s(t.time))])]),e._v(" "),s("p",[1==t.emojitype?[s("img",{attrs:{src:t.emojiexpression,alt:""}})]:[e._v("\n                      "+e._s(t.content)+"\n                  ")]],2)])])}),e._v(" "),s("span",{staticClass:"txt"}),e._v(" "),s("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==e.topStatus,expression:"topStatus !== 'loading'"}],class:{"is-rotate":"drop"===e.topStatus}},[e._v("↓")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===e.topStatus,expression:"topStatus === 'loading'"}]},[s("mt-spinner",{attrs:{type:"snake"}})],1)])],2)],1)]),e._v(" "),2==e.selected?s("div",{staticClass:"disclaimer"},[s("img",{attrs:{src:e.disclaimer,alt:""}})]):e._e(),e._v(" "),3==e.selected?s("div",[s("img",{attrs:{src:e.courseBg,alt:""}})]):e._e()])])},staticRenderFns:[]};var N=s("VU/8")(E,A,!1,function(e){s("Tla6")},null,null).exports,O={data:function(){return{loginName:"",password:"",inpCode:"",authCode:""}},created:function(){},mounted:function(){this.drawPic()},methods:{loginFn:function(){var e=this;console.log("验证码",this.authCode),""!=this.loginName.trim()?""!=this.password.trim()?this.inpCode==this.authCode?this.$request.post("Login/login",{loginName:this.loginName,password:this.password},function(t){200==t.code?(e.setCookie("username",e.loginName,1),e.$router.push("/")):-16004==t.code?Object(o.Toast)("用户名不存在"):-16008==t.code?Object(o.Toast)("密码错误"):Object(o.Toast)(t.msg)}):Object(o.Toast)("验证码错误"):Object(o.Toast)("请输入密码"):Object(o.Toast)("请输入用户名")},randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor:function(e,t){return"rgb("+this.randomNum(e,t)+","+this.randomNum(e,t)+","+this.randomNum(e,t)+")"},drawPic:function(){this.authCode="",this.errAuthCode=!1;var e=document.getElementById("canvas"),t=e.width,s=e.height,n=e.getContext("2d");n.textBaseline="bottom",n.fillStyle=this.randomColor(180,230),n.fillRect(0,0,t,s);for(var o="0123456789",i=0;i<4;i++){var a=o[this.randomNum(0,o.length)];n.fillStyle=this.randomColor(50,160),n.font=4*this.randomNum(18,40)+"px SimHei";var r=20+20*i*3,c=4*this.randomNum(25,35),l=this.randomNum(-30,30);n.translate(r,c),n.rotate(l*Math.PI/180),n.fillText(a,0,0),n.rotate(-l*Math.PI/180),n.translate(-r,-c),this.authCode+=a}for(i=0;i<5;i++)n.strokeStyle=this.randomColor(180,230),n.beginPath(),n.moveTo(this.randomNum(0,t),this.randomNum(0,s)),n.lineTo(this.randomNum(0,t),this.randomNum(0,s)),n.stroke();for(i=0;i<40;i++)n.fillStyle=this.randomColor(150,200),n.beginPath(),n.arc(this.randomNum(0,t),this.randomNum(0,s),1,0,2*Math.PI),n.fill()}}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"login-index"},[e._m(0),e._v(" "),s("article",{staticClass:"inp-container"},[s("div",{staticClass:"block"},[s("span",{staticClass:"icon icon-01"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginName,expression:"loginName"}],attrs:{type:"text",placeholder:"输入用户名"},domProps:{value:e.loginName},on:{input:function(t){t.target.composing||(e.loginName=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"block"},[s("span",{staticClass:"icon icon-02"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"输入密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"block"},[s("span",{staticClass:"icon icon-03"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.inpCode,expression:"inpCode"}],staticClass:"code-inp",attrs:{type:"number",placeholder:"输入图形中数字"},domProps:{value:e.inpCode},on:{input:function(t){t.target.composing||(e.inpCode=t.target.value)}}}),e._v(" "),s("div",{staticClass:"auth-code"},[s("canvas",{attrs:{id:"canvas"},on:{click:e.drawPic}})])])]),e._v(" "),s("div",{staticClass:"login-btn",on:{click:e.loginFn}},[e._v("立即登录")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("img",{attrs:{src:s("BPWA"),alt:""}})])}]};s("VU/8")(O,I,!1,function(e){s("5t/z")},null,null).exports;n.default.use(l.a);var L=new l.a({routes:[{path:"/",name:"index",component:N,meta:{title:"家华直播"}},{path:"*",redirect:"/"}]}),F=s("//Fk"),D=s.n(F),B=s("mtWM"),x=s.n(B),P="";P="http://"+document.location.hostname,x.a.defaults.baseURL=P,x.a.defaults.timeout=1e5,x.a.interceptors.request.use(function(e){return"/Viewpoint/getViewPointById"!=e.url&&"/Course/getCourseListByUserId"!=e.url&&"/Viewpoint/getViewPointListByUserId"!=e.url||0==function(e){for(var t=e+"=",s=document.cookie.split(";"),n=0;n<s.length;n++){for(var o=s[n];" "==o.charAt(0);)o=o.substring(1);if(-1!=o.indexOf(t))return o.substring(t.length,o.length)}return""}("isLogin")&&(e.headers={isAllowNoLogin:!0}),"get"==e.method&&(e.url=encodeURI(e.url)),e},function(e){return D.a.reject(e)}),x.a.interceptors.response.use(function(e){return e},function(e){return e.response&&(400===e.response.status?e.response("数据错误！"):401===e.response.status?window.app.$router.push({name:"Login"}):403===e.response.status?window.app.$message.error("您没有操作权限哦！"):404===e.response.status?window.app.$message.error("对象不存在！"):500===e.response.status?window.app.$message.error("服务器发生了一些错误哦！"):e.response="服务器发生了一些错误哦！"),D.a.reject(e)});var R=x.a,U=s("mw3O"),j=s.n(U),M={get:function(e,t,s,n){return R.get(e,{params:t}).then(function(e){s(e.data)}).catch(function(e){n&&n(e),console.log(e)})},post:function(e,t,s,n){return R.post(e,j.a.stringify(t)).then(function(e){s(e.data)}).catch(function(e){n&&n(e),console.log(e)})},put:function(e,t,s,n,o){return R.put(e,{params:t},function(e){var t={};return e&&(t.headers={Authorization:e}),t}(s)).then(function(e){n(e)}).catch(function(e){o&&o(e),console.log(e)})}};s("5K15"),s("d8/S"),s("Qbok");function H(e,t,s){var n=new Date;n.setTime(n.getTime()+24*s*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+o,console.info(document.cookie)}function q(e){for(var t=e+"=",s=document.cookie.split(";"),n=0;n<s.length;n++){for(var o=s[n];" "==o.charAt(0);)o=o.substring(1);if(-1!=o.indexOf(t))return o.substring(t.length,o.length)}return""}var Q={install:function(e,t){e.prototype.setCookie=H,e.prototype.getCookie=q,e.prototype.initRem=function(){new function(){var e=this;e.width=750,e.fontSize=100,e.changePage=function(){var t=document.documentElement.getBoundingClientRect().width;415>document.documentElement.getBoundingClientRect().width>375&&(t=375);var s=t/e.width;s<=1?document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+s*e.fontSize+"px !important"):document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+1*e.fontSize+"px !important")},e.changePage(),window.addEventListener("resize",function(){e.changePage()},!1)}}}};n.default.prototype.$request=M,n.default.config.productionTip=!1,n.default.use(Q),n.default.use(i.a),L.beforeEach(function(e,t,s){e.meta.title&&(document.title=e.meta.title),s()}),new n.default({el:"#app",router:L,components:{App:c},template:"<App/>"})},Qbok:function(e,t){},Tla6:function(e,t){},aTgM:function(e,t){!function(){if(window.WEB_SOCKET_FORCE_FLASH);else{if(window.WebSocket)return;if(window.MozWebSocket)return void(window.WebSocket=MozWebSocket)}var e;e=window.WEB_SOCKET_LOGGER?WEB_SOCKET_LOGGER:window.console&&window.console.log&&window.console.error?window.console:{log:function(){},error:function(){}},swfobject.getFlashPlayerVersion().major<10?e.error("Flash Player >= 10.0.0 is required."):("file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),window.WebSocket=function(e,t,s,n,o){var i=this;i.__id=WebSocket.__nextId++,WebSocket.__instances[i.__id]=i,i.readyState=WebSocket.CONNECTING,i.bufferedAmount=0,i.__events={},t?"string"==typeof t&&(t=[t]):t=[],i.__createTask=setTimeout(function(){WebSocket.__addTask(function(){i.__createTask=null,WebSocket.__flash.create(i.__id,e,t,s||null,n||0,o||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0||(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){if(this.__createTask)return clearTimeout(this.__createTask),this.__createTask=null,void(this.readyState=WebSocket.CLOSED);this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,t,s){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,s){if(e in this.__events)for(var n=this.__events[e],o=n.length-1;o>=0;--o)if(n[o]===t){n.splice(o,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],s=0;s<t.length;++s)t[s](e);var n=this["on"+e.type];n&&n.apply(this,[e])},WebSocket.prototype.__handleEvent=function(e){var t;if("readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol),"open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)(t=this.__createSimpleEvent("close")).wasClean=!!e.wasClean,t.code=e.code,t.reason=e.reason;else{if("message"!=e.type)throw"unknown event type: "+e.type;var s=decodeURIComponent(e.message);t=this.__createMessageEvent("message",s)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(window.MessageEvent&&"function"==typeof MessageEvent&&!window.opera)return new MessageEvent("message",{view:window,bubbles:!1,cancelable:!1,data:t});if(document.createEvent&&window.MessageEvent&&!window.opera){var s=document.createEvent("MessageEvent");return s.initMessageEvent("message",!1,!1,t,null,null,window,null),s}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__isFlashImplementation=!0,WebSocket.__initialized=!1,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(!WebSocket.__initialized)if(WebSocket.__initialized=!0,WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){if(!window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&!WEB_SOCKET_SWF_LOCATION.match(/(^|\/)WebSocketMainInsecure\.swf(\?.*)?$/)&&WEB_SOCKET_SWF_LOCATION.match(/^\w+:\/\/([^\/]+)/)){var t=RegExp.$1;location.host!=t&&e.error("[WebSocket] You must host HTML and WebSocketMain.swf in the same host ('"+location.host+"' != '"+t+"'). See also 'How to host HTML file and SWF file in different domains' section in README.md. If you use WebSocketMainInsecure.swf, you can suppress this message by WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR = true;")}var s=document.createElement("div");s.id="webSocketContainer",s.style.position="absolute",WebSocket.__isFlashLite()?(s.style.left="0px",s.style.top="0px"):(s.style.left="-100px",s.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",s.appendChild(n),document.body.appendChild(s),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})}else e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var t=WebSocket.__flash.receiveEvents(),s=0;s<t.length;++s)WebSocket.__instances[t[s].webSocketId].__handleEvent(t[s])}catch(t){e.error(t)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!!(e&&e.enabledPlugin&&e.enabledPlugin.filename)&&!!e.enabledPlugin.filename.match(/flashlite/i)},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||swfobject.addDomLoadEvent(function(){WebSocket.__initialize()}))}()},"d8/S":function(e,t){},g3Gj:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5a798747092e4e68cc39.js.map